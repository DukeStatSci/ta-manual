<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.548">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Duke Statistical Science TA Manual - 6&nbsp; Policies</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./resources.html" rel="next">
<link href="./best-practices.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./policies.html"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Policies</span></a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Duke Statistical Science TA Manual</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/DukeStatSci/ta-manual" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./useful-links.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Useful links</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./covid19.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">COVID-19</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./responsibilities.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Responsibilties</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./best-practices.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Best practices</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./policies.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Policies</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./resources.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Resources</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./training.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Training</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./head-ta.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Head TAs</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./evaluation-recognition.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Evaluation and recognition</span></span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#academic-misconduct" id="toc-academic-misconduct" class="nav-link active" data-scroll-target="#academic-misconduct"><span class="header-section-number">6.1</span> Academic Misconduct</a>
  <ul class="collapse">
  <li><a href="#teamwork-collaboration" id="toc-teamwork-collaboration" class="nav-link" data-scroll-target="#teamwork-collaboration"><span class="header-section-number">6.1.1</span> Teamwork / collaboration</a></li>
  </ul></li>
  <li><a href="#students-with-disabilities" id="toc-students-with-disabilities" class="nav-link" data-scroll-target="#students-with-disabilities"><span class="header-section-number">6.2</span> Students with disabilities</a></li>
  <li><a href="#diversity-and-inclusiveness" id="toc-diversity-and-inclusiveness" class="nav-link" data-scroll-target="#diversity-and-inclusiveness"><span class="header-section-number">6.3</span> Diversity and inclusiveness</a></li>
  <li><a href="#harassment" id="toc-harassment" class="nav-link" data-scroll-target="#harassment"><span class="header-section-number">6.4</span> Harassment</a></li>
  <li><a href="#relationships-with-students" id="toc-relationships-with-students" class="nav-link" data-scroll-target="#relationships-with-students"><span class="header-section-number">6.5</span> Relationships with students</a></li>
  <li><a href="#emergency-conditions" id="toc-emergency-conditions" class="nav-link" data-scroll-target="#emergency-conditions"><span class="header-section-number">6.6</span> Emergency conditions</a></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/DukeStatSci/ta-manual/edit/main/policies.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/DukeStatSci/ta-manual/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Policies</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="academic-misconduct" class="level2" data-number="6.1">
<h2 data-number="6.1" class="anchored" data-anchor-id="academic-misconduct"><span class="header-section-number">6.1</span> Academic Misconduct</h2>
<p>It’s crucial to let the course instructor know if you suspect or receive reports of academic misconduct so that we may handle all cases of dishonesty according to University Policy. It is your duty to report your suspicions to the instructor and they will investigate. Do not interrogate the students. This typically requires that the instructor report offenses to the Office of Judicial Affairs who will advise on mediation, arbitration, informal resolution or disciplinary action. The Duke Standard is as follows:</p>
<blockquote class="blockquote">
<p>Duke University is a community dedicated to scholarship, leadership, and service and to the principles of honesty, fairness, respect, and accountability. Citizens of this community commit to reflect upon and uphold these principles in all academic and non-academic endeavors, and to protect and promote a culture of integrity.</p>
<p>To uphold the Duke Community Standard:</p>
<ul>
<li><p>I will not lie, cheat, or steal in my academic endeavors;</p></li>
<li><p>I will conduct myself honorably in all my endeavors; and</p></li>
<li><p>I will act if the Standard is compromised.</p></li>
</ul>
</blockquote>
<p>Faculty and TAs are encouraged to be proactive in preventing dishonesty. For online exams, randomization and unique problems can help. Some time-limiting techniques are helpful but students with accommodations must be helped as well. There are hundreds of companies out there willing to sell students answers to problems sets, quizzes, and exams; using these services is likely to be a violation of the Duke Community Standard. There are AI/ML tools now that might be used to generate code or other work; instructors may have a policy about this in their syllabi. If you suspect usage in violation of the instructor’s course policies, talk with the instructor.</p>
<section id="teamwork-collaboration" class="level3" data-number="6.1.1">
<h3 data-number="6.1.1" class="anchored" data-anchor-id="teamwork-collaboration"><span class="header-section-number">6.1.1</span> Teamwork / collaboration</h3>
<p>If your course allows teamwork for homework or labs, ask the instructor to speak with your students about what type of collaboration is appropriate. For instance, if students can work together on HW problems, discussion is appropriate, but students must write up individual responses for every question. Student answers should not be the same as their collaborators’. If there is an in-class group assignment for which one submission is expected, make certain the submission instructions are clear and followed by the groups. Our students come from all over the world, from all kinds of prior learning experiences, and their prior experience with graded teamwork can be highly varied. Please help your students understand the nuances of permissible teamwork.</p>
</section>
</section>
<section id="students-with-disabilities" class="level2" data-number="6.2">
<h2 data-number="6.2" class="anchored" data-anchor-id="students-with-disabilities"><span class="header-section-number">6.2</span> Students with disabilities</h2>
<p>Students with disabilities have rights and responsibilities which may be found here <a href="https://access.duke.edu/students/rights-responsibilities" class="uri">https://access.duke.edu/students/rights-responsibilities</a>. The procedures for accessing accomodations or support have changed in the last year and are documented here [https://access.duke.edu/requests](https://access.duke.edu/requests){.uri}. In some classes, one TA will be asked to manage accommodations for the course. In larger classes, multiple TAs may be involved. If your instructor asks for assistance in providing accommodations for a student, be sure that all information regarding a student’s disability or accommodations is kept confidential. Do not discuss it with other TAs or in front of other students. Questions should be directed to the instructor only. If a student approaches you about accommodations, ask them to communicate with the instructor and let the instructor know you have referred them. If you are leading a lab and a student asks for lab accommodations, discuss it with the instructor.</p>
<p>Duke also has a Testing Center available to students who need accommodations. If instructors choose to use the Testing Center, the decision should be stated in the class syllabus. Students who qualify to use it include students granted testing accommodations by the SDAO and students who need to complete make-up exams due to an approved absence. Direct all questions from students about the testing center to the instructor or direct the students to <a href="https://testingcenter.duke.edu/">https://testingcenter.duke.edu</a>.</p>
<p>If a student, TA, or instructor has or develops physical access challenges to any assigned space at Duke, please have them contact the Duke Disability Management System using the websites above. There may be alternative transportation or access arrangements that can be made. This page has more information on getting around campus <a href="https://access.duke.edu/getting-around" class="uri">https://access.duke.edu/getting-around</a>. Please let the instructor, DUS, and Undergraduate Coordinator know if there are access issues so that our classrooms, lab, and department spaces are hospitable to everyone.</p>
</section>
<section id="diversity-and-inclusiveness" class="level2" data-number="6.3">
<h2 data-number="6.3" class="anchored" data-anchor-id="diversity-and-inclusiveness"><span class="header-section-number">6.3</span> Diversity and inclusiveness</h2>
<p>Students from all diverse backgrounds and perspectives need to be well-served by our courses, their learning needs to be addressed both in and out of class, and the diversity that the students bring to this class need to be viewed as a resource, strength, and benefit. Therefore, the materials and activities you present need to be respectful of diversity: gender identity, sexuality, disability, age, socioeconomic status, ethnicity, race, nationality, religion, and culture. Our department’s statement is here: <a href="https://stat.duke.edu/diversity-equity-and-inclusion" class="uri">https://stat.duke.edu/diversity-equity-and-inclusion</a>.</p>
<p>If you have suggestions for improving the effectiveness of the course for you personally, or for other students or student groups, let the faculty member or the DUS know. There is a module on this in TA training in Sakai.</p>
<p>Furthermore, you should strive to create a learning environment for our students that supports a diversity of thoughts, perspectives and experiences, and that honors students’ identities (including gender identity, sexuality, disability, age, socioeconomic status, ethnicity, race, nationality, religion, and culture). To help accomplish this, encourage your students to</p>
<ul>
<li>let you know if they have a name and/or set of pronouns that differ from those that appear in the Duke records,</li>
<li>reach out if you feel like their performance in the class is being impacted by their experiences outside of class, and remind them that if they prefer to speak with someone outside of the course, their academic dean/director is an excellent resource, and</li>
<li>talk to you if something was said in class (by anyone) that made them feel uncomfortable.</li>
</ul>
<p>Requiring people to identify their pronouns is not helpful; invite it but don’t force it. If you want to give your pronouns, do so. The DukeHub now lets students who wish to identify their personal pronouns to do so in their records. Here are some Duke pronoun resources <a href="https://students.duke.edu/belonging/icr/csgd/pronouns/" class="uri">https://students.duke.edu/belonging/icr/csgd/pronouns/</a>.</p>
<p>Please let the instructor know if there is an issue that you notice in class or in office hours that is disrespectful.</p>
</section>
<section id="harassment" class="level2" data-number="6.4">
<h2 data-number="6.4" class="anchored" data-anchor-id="harassment"><span class="header-section-number">6.4</span> Harassment</h2>
<p>Harassment complaints that involve both undergraduate students and either graduate students, faculty members or employees are addressed, as necessary, through the intervention of Office of Institutional Equity or the official responsible for the respondent’s supervision. Such situations are of particular concern because the possible inherent power differential between the parties increases the potential for coerciveness. See <a href="http://www.duke.edu/web/equity/harassment.html" class="uri">http://www.duke.edu/web/equity/harassment.html</a> for more information on Duke’s harassment policy. If you have any concerns regarding harassment, please feel free to reach out to the instructor or DUS for advice as well.</p>
</section>
<section id="relationships-with-students" class="level2" data-number="6.5">
<h2 data-number="6.5" class="anchored" data-anchor-id="relationships-with-students"><span class="header-section-number">6.5</span> Relationships with students</h2>
<p>Consensual romantic or sexual relationships between any student charged with academic instruction and students receiving such instruction are prohibited. This applies to teaching assistants, research assistants, tutors, graders and any other students who provide academic instruction to any other student. A TA could lose the opportunity to continue in the instruction role and such behavior could also violate student conduct policies. This is covered in more detail in Appendix L to the Faculty Handbook (<a href="https://policies.provost.duke.edu/docs/faculty-handbook-appendix-l-faculty-student-relationships" class="uri">https://policies.provost.duke.edu/docs/faculty-handbook-appendix-l-faculty-student-relationships</a>).</p>
<p>If you are already in a relationship with a student who is in the class for which you are TAing, please discuss this with the instructor and the DUS or Undergraduate Coordinator. We can change your assignment or make certain you are never grading that person’s work or helping in their lab.</p>
</section>
<section id="emergency-conditions" class="level2" data-number="6.6">
<h2 data-number="6.6" class="anchored" data-anchor-id="emergency-conditions"><span class="header-section-number">6.6</span> Emergency conditions</h2>
<p>Download and install the Live Safe app <a href="https://prepare.duke.edu/programs/livesafe" class="uri">https://prepare.duke.edu/programs/livesafe</a> to get emergency notifications for Duke’s campuses. You can obtain information on emergency notifications and procedures at <a href="https://emergency.duke.edu" class="uri">https://emergency.duke.edu</a>. Please become familiar with this site and its contents.</p>
<p>Our academic calendar sometimes brings with it the threat of severe weather in North Carolina. At the start of your course, be sure and locate the nearest tornado safe zone in your assigned location or wherever you are staying. If you are in Old Chem, the nearest tornado safe area is in the library buildings next door. In other buildings, if you can’t find signage, ask staff in that building for their tornado safe location. If there is a tornado watch, simply monitor conditions. If there is a tornado warning announced, however, you will be notified to take shelter in the nearest tornado safe area.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./best-practices.html" class="pagination-link  aria-label=" &lt;span="" practices&lt;="" span&gt;"="">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Best practices</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./resources.html" class="pagination-link" aria-label="<span class='chapter-number'>7</span>&nbsp; <span class='chapter-title'>Resources</span>">
        <span class="nav-page-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Resources</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/DukeStatSci/ta-manual/edit/main/policies.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/DukeStatSci/ta-manual/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></div></div></footer></body></html>